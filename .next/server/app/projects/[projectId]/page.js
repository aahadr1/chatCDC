(()=>{var e={};e.id=110,e.ids=[110],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},1003:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>d,routeModule:()=>x,tree:()=>c});var r=s(482),a=s(9108),n=s(2563),i=s.n(n),l=s(8300),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["projects",{children:["[projectId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1619)),"/Users/Aaron/Downloads/app chatgpt cari/app/projects/[projectId]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,2917)),"/Users/Aaron/Downloads/app chatgpt cari/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/Aaron/Downloads/app chatgpt cari/app/projects/[projectId]/page.tsx"],p="/projects/[projectId]/page",u={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/projects/[projectId]/page",pathname:"/projects/[projectId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9880:()=>{},2933:(e,t,s)=>{Promise.resolve().then(s.bind(s,7978))},759:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2583,23)),Promise.resolve().then(s.t.bind(s,6840,23)),Promise.resolve().then(s.t.bind(s,8771,23)),Promise.resolve().then(s.t.bind(s,3225,23)),Promise.resolve().then(s.t.bind(s,9295,23)),Promise.resolve().then(s.t.bind(s,3982,23))},7978:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(2295),a=s(3729),n=s(2254),i=s(2739),l=s(3024),o=s(7121),c=s(8852),d=s(6135),p=s(783),u=s.n(p),x=s(4173);function m(){let e=(0,n.useParams)(),t=(0,n.useRouter)(),s=e.projectId,[p,m]=(0,a.useState)(null),[h,g]=(0,a.useState)([]),[y,j]=(0,a.useState)(!0),[f,b]=(0,a.useState)(null),[v,N]=(0,a.useState)(""),[w,_]=(0,a.useState)(!1),P=(0,a.useRef)(null),A=(0,a.useRef)(null),q=()=>{A.current?.scrollIntoView({behavior:"smooth"})};(0,a.useEffect)(()=>{q()},[h]);let S=(0,a.useCallback)(async()=>{try{let e=(0,x.B)();if(!e){b("Supabase not configured"),j(!1);return}let{data:{user:r},error:a}=await e.auth.getUser();if(a||!r){t.push("/login");return}let{data:n,error:i}=await e.from("projects").select("id, name, status, document_count, created_at").eq("id",s).eq("user_id",r.id).single();if(i||!n){b("Project not found or access denied"),j(!1);return}m(n);let{data:l,error:o}=await e.from("project_conversations").select("id, user_message, ai_response, created_at").eq("project_id",s).order("created_at",{ascending:!0});o?console.error("Error loading conversations:",o):g(l||[]),j(!1)}catch(e){console.error("Error loading project:",e),b("Failed to load project"),j(!1)}},[s,t]);(0,a.useEffect)(()=>{S()},[S]);let k=async()=>{if(!v.trim()||w||!p)return;_(!0);let e=v.trim();N(""),P.current&&(P.current.style.height="auto");try{let t=await fetch(`/api/projects/${s}/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to send message")}let r=await t.json(),a={id:Date.now().toString(),user_message:e,ai_response:r.response,created_at:new Date().toISOString()};g(e=>[...e,a])}catch(e){console.error("Error sending message:",e),b(e instanceof Error?e.message:"Failed to send message")}finally{_(!1)}};return y?r.jsx("div",{className:"min-h-screen bg-apple-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx(i.Z,{size:48,className:"animate-spin mx-auto mb-4 text-apple-blue-500"}),r.jsx("p",{className:"text-apple-gray-600",children:"Loading project..."})]})}):f||!p?r.jsx("div",{className:"min-h-screen bg-apple-gray-50 flex items-center justify-center",children:r.jsx("div",{className:"text-center",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-apple-gray-200 p-8 max-w-md",children:[r.jsx("p",{className:"text-apple-red-600 mb-4",children:f||"Project not found"}),(0,r.jsxs)(u(),{href:"/",className:"btn-primary inline-flex items-center gap-2",children:[r.jsx(l.Z,{size:16}),"Back to Home"]})]})})}):(0,r.jsxs)("div",{className:"min-h-screen bg-apple-gray-50 flex flex-col",children:[r.jsx("div",{className:"bg-white border-b border-apple-gray-200 px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx(u(),{href:"/",className:"p-2 hover:bg-apple-gray-100 rounded-lg transition-colors",children:r.jsx(l.Z,{size:20})}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h1",{className:"text-xl font-bold text-apple-gray-900",children:p.name}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-sm text-apple-gray-600 mt-1",children:[(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[r.jsx(o.Z,{size:14}),p.document_count," documents"]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${"ready"===p.status?"bg-apple-green-100 text-apple-green-700":"bg-apple-orange-100 text-apple-orange-700"}`,children:"ready"===p.status?"Ready":"Processing"})]})]})]})}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col max-w-4xl mx-auto w-full",children:[(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:[0===h.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx(c.Z,{size:48,className:"mx-auto mb-4 text-apple-gray-400"}),r.jsx("h3",{className:"text-lg font-medium text-apple-gray-700 mb-2",children:"Start chatting with your documents"}),r.jsx("p",{className:"text-apple-gray-500",children:"Ask questions about the content in your uploaded PDFs"})]}):r.jsx("div",{className:"space-y-6",children:h.map(e=>(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("div",{className:"flex justify-end",children:r.jsx("div",{className:"bg-apple-blue-500 text-white rounded-2xl rounded-tr-md px-4 py-3 max-w-2xl",children:r.jsx("p",{className:"whitespace-pre-wrap",children:e.user_message})})}),r.jsx("div",{className:"flex justify-start",children:r.jsx("div",{className:"bg-white border border-apple-gray-200 rounded-2xl rounded-tl-md px-4 py-3 max-w-2xl shadow-sm",children:r.jsx("p",{className:"whitespace-pre-wrap text-apple-gray-800",children:e.ai_response})})})]},e.id))}),r.jsx("div",{ref:A})]}),(0,r.jsxs)("div",{className:"p-6 bg-white border-t border-apple-gray-200",children:["ready"!==p.status&&r.jsx("div",{className:"mb-4 p-3 bg-apple-orange-50 border border-apple-orange-200 rounded-lg",children:r.jsx("p",{className:"text-sm text-apple-orange-700",children:"Documents are still being processed. Please wait before sending messages."})}),(0,r.jsxs)("div",{className:"flex gap-3 items-end",children:[r.jsx("div",{className:"flex-1",children:r.jsx("textarea",{ref:P,value:v,onChange:e=>{N(e.target.value),P.current&&(P.current.style.height="auto",P.current.style.height=`${Math.min(P.current.scrollHeight,120)}px`)},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),k())},placeholder:"ready"===p.status?"Ask a question about your documents...":"Processing documents...",disabled:w||"ready"!==p.status,className:"w-full px-4 py-3 border border-apple-gray-200 rounded-2xl focus:ring-2 focus:ring-apple-blue-500 focus:border-transparent outline-none resize-none transition-colors",rows:1,style:{minHeight:"48px",maxHeight:"120px"}})}),r.jsx("button",{onClick:k,disabled:!v.trim()||w||"ready"!==p.status,className:"p-3 bg-apple-blue-500 text-white rounded-2xl hover:bg-apple-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex-shrink-0",children:w?r.jsx(i.Z,{size:20,className:"animate-spin"}):r.jsx(d.Z,{size:20})})]}),r.jsx("p",{className:"text-xs text-apple-gray-500 mt-2 text-center",children:"AI responses are based on your uploaded documents"})]})]})]})}},4173:(e,t,s)=>{"use strict";s.d(t,{B:()=>i});var r=s(9072);let a=process.env.NEXT_PUBLIC_SUPABASE_URL,n=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;function i(){return a&&n?(0,r.eI)(a,n):(console.warn("Missing NEXT_PUBLIC_SUPABASE_URL or NEXT_PUBLIC_SUPABASE_ANON_KEY environment variables"),null)}},3024:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(9224).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7121:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(9224).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},2739:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(9224).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},8852:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(9224).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},6135:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(9224).Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},2917:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i,metadata:()=>a,viewport:()=>n});var r=s(5036);s(7272);let a={title:"ChatCDC - AI Assistant",description:"A modern, luxurious AI chat interface powered by GPT-5"},n={width:"device-width",initialScale:1};function i({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:"font-sf",children:e})})}},1619:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>i});let r=(0,s(6843).createProxy)(String.raw`/Users/Aaron/Downloads/app chatgpt cari/app/projects/[projectId]/page.tsx`),{__esModule:a,$$typeof:n}=r,i=r.default},7272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,312,764,190],()=>s(1003));module.exports=r})();