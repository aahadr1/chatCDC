"use strict";(()=>{var r={};r.id=871,r.ids=[871],r.modules={517:r=>{r.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3685:r=>{r.exports=require("http")},5687:r=>{r.exports=require("https")},5477:r=>{r.exports=require("punycode")},2781:r=>{r.exports=require("stream")},7310:r=>{r.exports=require("url")},9796:r=>{r.exports=require("zlib")},2463:(r,e,t)=>{t.r(e),t.d(e,{headerHooks:()=>h,originalPathname:()=>g,patchFetch:()=>m,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>f,staticGenerationAsyncStorage:()=>j,staticGenerationBailout:()=>_});var o={};t.r(o),t.d(o,{GET:()=>p,POST:()=>c});var s=t(5419),a=t(9108),n=t(9678),i=t(8070),u=t(9983);async function c(r){try{let e=(0,u.B)();if(!e)return i.Z.json({error:"Supabase not configured"},{status:500});let{data:{user:t},error:o}=await e.auth.getUser();if(o||!t)return i.Z.json({error:"Authentication required"},{status:401});let{name:s}=await r.json();if(!s||"string"!=typeof s||!s.trim())return i.Z.json({error:"Project name is required"},{status:400});let{data:a,error:n}=await e.from("projects").insert({name:s.trim(),user_id:t.id,status:"processing",created_at:new Date().toISOString()}).select().single();if(n)return console.error("Error creating project:",n),i.Z.json({error:"Failed to create project"},{status:500});return i.Z.json({project:a})}catch(r){return console.error("Project creation error:",r),i.Z.json({error:"Internal server error"},{status:500})}}async function p(r){try{let r=(0,u.B)();if(!r)return i.Z.json({error:"Supabase not configured"},{status:500});let{data:{user:e},error:t}=await r.auth.getUser();if(t||!e)return i.Z.json({error:"Authentication required"},{status:401});let{data:o,error:s}=await r.from("projects").select("id, name, status, created_at, document_count").eq("user_id",e.id).order("created_at",{ascending:!1});if(s)return console.error("Error fetching projects:",s),i.Z.json({error:"Failed to fetch projects"},{status:500});return i.Z.json({projects:o||[]})}catch(r){return console.error("Projects fetch error:",r),i.Z.json({error:"Internal server error"},{status:500})}}let d=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/projects/route",pathname:"/api/projects",filename:"route",bundlePath:"app/api/projects/route"},resolvedPagePath:"/Users/Aaron/Downloads/app chatgpt cari/app/api/projects/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:l,staticGenerationAsyncStorage:j,serverHooks:f,headerHooks:h,staticGenerationBailout:_}=d,g="/api/projects/route";function m(){return(0,n.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:j})}},9983:(r,e,t)=>{t.d(e,{B:()=>n});var o=t(2409);let s=process.env.NEXT_PUBLIC_SUPABASE_URL,a=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;function n(){return s&&a?(0,o.eI)(s,a):(console.warn("Missing NEXT_PUBLIC_SUPABASE_URL or NEXT_PUBLIC_SUPABASE_ANON_KEY environment variables"),null)}}};var e=require("../../../webpack-runtime.js");e.C(r);var t=r=>e(e.s=r),o=e.X(0,[638,206,409],()=>t(2463));module.exports=o})();