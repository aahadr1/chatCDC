"use strict";(()=>{var e={};e.id=744,e.ids=[744],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4300:e=>{e.exports=require("buffer")},2361:e=>{e.exports=require("events")},2781:e=>{e.exports=require("stream")},5961:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>f,originalPathname:()=>b,patchFetch:()=>y,requestAsyncStorage:()=>h,routeModule:()=>m,serverHooks:()=>g,staticGenerationAsyncStorage:()=>d,staticGenerationBailout:()=>v});var o={};r.r(o),r.d(o,{POST:()=>c});var s=r(5419),n=r(9108),i=r(9678),a=r(8070),p=r(789),u=r.n(p);let _=process.env.REPLICATE_API_TOKEN;async function l(e){try{if(!_)throw Error("Missing REPLICATE_API_TOKEN environment variable");let t=new(u())({auth:_}),r={};e.model&&(r.model=e.model),e.prompt&&(r.prompt=e.prompt),e.instructions&&(r.instructions=e.instructions),e.image_input&&e.image_input.length>0&&(r.image_input=e.image_input),e.reasoning_effort&&(r.reasoning_effort=e.reasoning_effort),e.verbosity&&(r.verbosity=e.verbosity),"boolean"==typeof e.enable_web_search&&(r.enable_web_search=e.enable_web_search),e.max_output_tokens&&(r.max_output_tokens=e.max_output_tokens),e.tools&&e.tools.length>0&&(r.tools=e.tools),e.json_schema&&Object.keys(e.json_schema).length>0&&(r.json_schema=e.json_schema),e.simple_schema&&e.simple_schema.length>0&&(r.simple_schema=e.simple_schema),e.input_item_list&&e.input_item_list.length>0&&(r.input_item_list=e.input_item_list),e.previous_response_id&&/^resp_/.test(e.previous_response_id)&&(r.previous_response_id=e.previous_response_id);let o=await t.run("openai/gpt-5-structured",{input:r}),s="string"==typeof o?o:o?.text,n="object"==typeof o&&o?o.response_id:void 0;if(!s)throw Error("Empty response from Replicate model");return{text:s,response_id:n||""}}catch(e){throw console.error("Error calling Replicate API:",e),e}}async function c(e){try{let{message:t,settings:r,images:o,previousResponseId:s}=await e.json();if(!t&&(!o||0===o.length))return a.Z.json({error:"Message or images are required"},{status:400});let n={model:r.model||"gpt-5",prompt:t,image_input:o||[],reasoning_effort:r.reasoningEffort||"minimal",verbosity:r.verbosity||"medium",enable_web_search:r.enableWebSearch||!1,max_output_tokens:r.maxTokens,previous_response_id:"string"==typeof s&&s.startsWith("resp_")?s:void 0},i=await l(n);return a.Z.json({content:i.text,responseId:i.response_id})}catch(e){return console.error("Chat API error:",e),a.Z.json({error:"Failed to process chat request",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}let m=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/chat/route",pathname:"/api/chat",filename:"route",bundlePath:"app/api/chat/route"},resolvedPagePath:"/Users/Aaron/Downloads/app chatgpt cari/app/api/chat/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:h,staticGenerationAsyncStorage:d,serverHooks:g,headerHooks:f,staticGenerationBailout:v}=m,b="/api/chat/route";function y(){return(0,i.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:d})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[638,206,789],()=>r(5961));module.exports=o})();